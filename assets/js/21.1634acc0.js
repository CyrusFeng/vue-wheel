(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{200:function(e,t,n){"use strict";var a=n(92);n.n(a).a},202:function(e,t,n){},215:function(e,t,n){"use strict";n(47),n(190),n(36);var a={name:"c-table",components:{"c-icon":n(27).a},props:{selectedTableItems:{type:Array},columns:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]},validator:function(e){return e.filter(function(e){return void 0===e.id}).length<=0}},numberVisible:{type:Boolean,default:!0},bordered:{type:Boolean,default:!0},compact:{type:Boolean,default:!0},striped:{type:Boolean,default:!0},isFrontendSort:{type:Boolean},loading:{type:Boolean},height:{type:[String,Number]}},data:function(){return{table2:null,onWindowResize:null}},computed:{areAllItemsSelected:function(){var e=this.dataSource.map(function(e){return e.id}).sort(),t=this.selectedTableItems.map(function(e){return e.id}).sort(),n=!0;if(this.selectedTableItems.length!==this.dataSource.length)n=!1;else for(var a=0;a<e.length;a++)if(e[a]!==t[a]){n=!1;break}return n}},watch:{selectedTableItems:function(){this.selectedTableItems.length===this.dataSource.length?this.$refs.allChecked.indeterminate=!1:0===this.selectedTableItems.length?this.$refs.allChecked.indeterminate=!1:this.$refs.allChecked.indeterminate=!0},columns:{handler:function(e,t){this.isFrontendSort?this.order(e):this.backendOrder(e)},immediate:!0}},mounted:function(){this.table2=this.$refs.table.cloneNode(!1),this.table2.classList.add("table-copy");var e=this.$refs.table.children[0].getBoundingClientRect().height;this.$refs.tableWrap.style.marginTop=e+"px",this.$refs.tableWrap.style.height=this.height-e+"px",this.table2.appendChild(this.$refs.table.children[0]),console.log(this.table2),this.$refs.tableComponentWrap.appendChild(this.table2)},beforeDestroy:function(){},methods:{onChangeItem:function(e,t){var n=JSON.parse(JSON.stringify(this.selectedTableItems));e.target.checked?n.push(t):n=n.filter(function(e){return e.id!==t.id}),this.$emit("update:selectedTableItems",n)},onChangeAllItems:function(e){e.target.checked?this.$emit("update:selectedTableItems",this.dataSource):this.$emit("update:selectedTableItems",[])},sort:function(e){var t=JSON.parse(JSON.stringify(this.columns));t.forEach(function(t){t.field===e.field&&("asc"===e.sort?t.sort="desc":"desc"===e.sort?t.sort="normal":"normal"===e.sort&&(t.sort="asc"))}),this.$emit("update:columns",t)},order:function(e){var t=this,n=JSON.parse(JSON.stringify(this.dataSource));e.forEach(function(e){e.openSort&&t.sortByKey(n,e.field,e.sort)}),this.$emit("update:dataSource",n)},backendOrder:function(e){var t=[];e.forEach(function(e){if(e.openSort){var n={};n.field=e.field,n.sort=e.sort,t.push(n)}}),this.$emit("backendOrder",t)},sortByKey:function(e,t,n){return e.sort(function(e,a){var s=e[t],r=a[t];return"asc"===n?s<r?-1:s>r?1:0:"desc"===n?s>r?-1:s<r?1:0:void 0})}}},s=(n(200),n(1)),r=Object(s.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"tableComponentWrap",staticClass:"table-component-wrap"},[n("div",{ref:"tableWrap",staticClass:"table-wrap",style:{height:e.height+"px"}},[n("table",{ref:"table",staticClass:"table",class:{bordered:e.bordered,compact:e.compact,striped:e.striped}},[n("thead",[n("tr",[n("th",{staticStyle:{width:"50px"}},[n("input",{ref:"allChecked",attrs:{type:"checkbox"},domProps:{checked:e.areAllItemsSelected},on:{change:e.onChangeAllItems}})]),e._v(" "),e.numberVisible?n("th",{staticStyle:{width:"50px"}},[e._v("#")]):e._e(),e._v(" "),e._l(e.columns,function(t){return n("th",{key:t.field,style:{width:t.width+"px"}},[n("div",{staticClass:"wrapper"},[n("span",[e._v(e._s(t.text))]),e._v(" "),t.openSort?n("span",{staticClass:"sort-btns",on:{click:function(n){return e.sort(t)}}},[n("c-icon",{class:{active:"asc"===t.sort},attrs:{name:"asc"}}),e._v(" "),n("c-icon",{class:{active:"desc"===t.sort},attrs:{name:"desc"}})],1):e._e()])])}),e._v(" "),n("th",{staticStyle:{width:"50px"}})],2)]),e._v(" "),n("tbody",e._l(e.dataSource,function(t,a){return n("tr",{key:t.id},[n("td",{staticStyle:{width:"50px"}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.selectedTableItems.filter(function(e){return e.id===t.id}).length>0},on:{change:function(n){return e.onChangeItem(n,t)}}})]),e._v(" "),e.numberVisible?n("td",{staticStyle:{width:"50px"}},[e._v(e._s(a+1))]):e._e(),e._v(" "),e._l(e.columns,function(a){return[n("td",{key:a.field,style:{width:a.width+"px"}},[e._v(e._s(t[a.field]))])]}),e._v(" "),n("td",{staticStyle:{width:"50px"}},[e._t("default",null,{item:t})],2)],2)}),0)])]),e._v(" "),e.loading&&!e.isFrontendSort?n("div",{staticClass:"loading-wrap"},[n("c-icon",{staticClass:"loading",attrs:{name:"loading",width:"30px",height:"30px"}})],1):e._e()])},[],!1,null,"a82639dc",null);t.a=r.exports},312:function(e,t,n){"use strict";var a=n(202);n.n(a).a},356:function(e,t,n){"use strict";n.r(t);var a=n(27),s=n(215),r={name:"table-demo",components:{"c-icon":a.a,"c-table":s.a},data:function(){return{code:"<c-table :data-source.sync=\"dataSource\"\n         :selected-table-items.sync=\"selectedTableItems\"\n         :columns.sync=\"columns\"\n         :is-frontend-sort=\"isFrontendSort\"\n         :loading=\"loading\"\n         @backendOrder=\"getOrderedList($event)\"\n         height=\"300\">\n    <template slot-scope=\"item\">\n        <a href=\"\" @click=\"edit(item)\">编辑</a>\n    </template>\n</c-table>\n\ndata() {\n      return {\n        columns: [\n          { text: '姓名', field: 'name', openSort: true, sort: 'asc', width: 150 },\n          { text: '分数', field: 'score', openSort: true, sort: 'asc', width: 150 },\n        ],\n        dataSource: [\n          { id: 1, name: 'CyrusFeng', score: 100 },\n          { id: 2, name: 'jack', score: 70 },\n          { id: 3, name: 'zzz', score: 80 },\n          { id: 4, name: 'frank', score: 80 },\n          { id: 5, name: 'drank', score: 80 },\n          { id: 6, name: 'hrank', score: 80 },\n          { id: 7, name: 'brank', score: 81 },\n          { id: 8, name: 'brank', score: 82 },\n          { id: 9, name: 'trank', score: 83 },\n          { id: 10, name: 'nrank', score: 84 },\n          { id: 11, name: 'nrank', score: 85 },\n          { id: 12, name: 'nrank', score: 75 },\n          { id: 13, name: 'nrank', score: 76 },\n          { id: 14, name: 'nrank', score: 77 },\n        ],\n        selectedTableItems: [],\n        isFrontendSort: false,\n        loading: false\n      }\n}\n\nmethods:{\n  edit(item){\n    console.log(item.item)\n  },\n  getOrderedList($event){\n    alert(JSON.stringify($event))\n    this.loading = true\n    setTimeout(()=>{\n        this.loading = false\n    },1000)\n  }\n}",columns:[{text:"姓名",field:"name",openSort:!0,sort:"asc",width:150},{text:"分数",field:"score",openSort:!0,sort:"asc",width:150}],dataSource:[{id:1,name:"CyrusFeng",score:100},{id:2,name:"jack",score:70},{id:3,name:"zzz",score:80},{id:4,name:"frank",score:80},{id:5,name:"drank",score:80},{id:6,name:"hrank",score:80},{id:7,name:"brank",score:81},{id:8,name:"brank",score:82},{id:9,name:"trank",score:83},{id:10,name:"nrank",score:84},{id:11,name:"nrank",score:85},{id:12,name:"nrank",score:75},{id:13,name:"nrank",score:76},{id:14,name:"nrank",score:77}],selectedTableItems:[],isFrontendSort:!1,loading:!1}},methods:{edit:function(e){console.log(e.item),alert("您正在编辑的这条数据的分数为".concat(e.item.score))},getOrderedList:function(e){var t=this;alert(JSON.stringify(e)),this.loading=!0,setTimeout(function(){t.loading=!1},1e3)}}},i=(n(312),n(1)),o=Object(i.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._m(0),e._v(" "),n("div",{staticClass:"wrap"},[n("c-table",{attrs:{columns:e.columns,"data-source":e.dataSource,"selected-table-items":e.selectedTableItems,"is-frontend-sort":e.isFrontendSort,loading:e.loading,height:"300"},on:{"update:columns":function(t){e.columns=t},"update:dataSource":function(t){e.dataSource=t},"update:data-source":function(t){e.dataSource=t},"update:selectedTableItems":function(t){e.selectedTableItems=t},"update:selected-table-items":function(t){e.selectedTableItems=t},backendOrder:function(t){return e.getOrderedList(t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{on:{click:function(n){return e.edit(t)}}},[e._v("编辑")])]}}])})],1),e._v(" "),e._m(1),e._v(" "),n("pre",[n("code",[e._v(e._s(e.code))])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("服务端排序预览：")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("代码：")])])}],!1,null,"081f1b2e",null);t.default=o.exports},92:function(e,t,n){}}]);