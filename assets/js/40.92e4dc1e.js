(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{370:function(t,a,v){"use strict";v.r(a);var _=v(1),r=Object(_.a)({},function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"upload"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#upload","aria-hidden":"true"}},[t._v("#")]),t._v(" upload")]),t._v(" "),v("h2",{attrs:{id:"github-pages问题"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#github-pages问题","aria-hidden":"true"}},[t._v("#")]),t._v(" github pages问题")]),t._v(" "),v("ul",[v("li",[t._v("由于GitHub pages使用https协议，上传和预览接口目前都是http协议，所以没办法访问成功。下面是组件功能的一些截图\n"),v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006tNbRwly1gaytjxrh6hj31700iydh6.jpg",alt:"avatar"}}),t._v(" "),v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006tNbRwly1gaytimheutj31680imtam.jpg",alt:"avatar"}}),t._v(" "),v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006tNbRwly1gaytkonokcj30ns092mxa.jpg",alt:"avatar"}}),t._v(" "),v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006tNbRwly1gaytkxjkl0j30ng086q4d.jpg",alt:"avatar"}})])]),t._v(" "),v("h2",{attrs:{id:"需求演示"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#需求演示","aria-hidden":"true"}},[t._v("#")]),t._v(" 需求演示")]),t._v(" "),v("ul",[v("li",[t._v("上传一个或一些文件")]),t._v(" "),v("li",[t._v("展示上传的进度")]),t._v(" "),v("li",[t._v("控制上传数量")]),t._v(" "),v("li",[t._v("按照不同形式展示文件列表")]),t._v(" "),v("li",[t._v("model为ordinary时显示上传文件的名称和体积")]),t._v(" "),v("li",[t._v("model为ordinary时可自定义上传按钮")]),t._v(" "),v("li",[t._v("model为picture-card时上传成功后可预览")])]),t._v(" "),v("ClientOnly",[v("upload-demo"),t._v(" "),v("upload-demo2")],1),t._v(" "),v("h2",{attrs:{id:"api"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#api","aria-hidden":"true"}},[t._v("#")]),t._v(" API")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("参数")]),t._v(" "),v("th",[t._v("说明")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("默认值")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("action")]),t._v(" "),v("td",[t._v("上传的地址")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("必填")])]),t._v(" "),v("tr",[v("td",[t._v("name")]),t._v(" "),v("td",[t._v("发到后台的文件参数名")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("必填")])]),t._v(" "),v("tr",[v("td",[t._v("fileList")]),t._v(" "),v("td",[t._v("已经上传的文件列表")]),t._v(" "),v("td",[t._v("Array")]),t._v(" "),v("td",[t._v("[]")])]),t._v(" "),v("tr",[v("td",[t._v("model")]),t._v(" "),v("td",[t._v("上传列表的样式，支持两种基本样式 ordinary 和 picture-card")]),t._v(" "),v("td",[t._v("String")]),t._v(" "),v("td",[t._v("默认值：ordinary")])]),t._v(" "),v("tr",[v("td",[t._v("maxLength")]),t._v(" "),v("td",[t._v("可上传数量")]),t._v(" "),v("td",[t._v("String,Number")]),t._v(" "),v("td",[t._v("0")])])])]),t._v(" "),v("h2",{attrs:{id:"实现思路"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#实现思路","aria-hidden":"true"}},[t._v("#")]),t._v(" 实现思路")]),t._v(" "),v("ul",[v("li",[t._v("通过插槽实现自定义上传按钮")]),t._v(" "),v("li",[t._v("点击按钮动态创建input,监听change事件")]),t._v(" "),v("li",[t._v("使用new FormData() 保存数据，将name和file对应起来")]),t._v(" "),v("li",[t._v("通过单向数据流更新fileList")]),t._v(" "),v("li",[t._v("使用ajax的onUploadProgress回调获取上传进度")]),t._v(" "),v("li",[t._v("后端使用nodejs编写，nodejs中间件监听请求。前端跨域发送复杂请求，所以监听post请求的同时需要监听option预检请求。部署到云服务器，使用pm2守护进程")])])],1)},[],!1,null,null,null);a.default=r.exports}}]);